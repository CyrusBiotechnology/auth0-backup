FROM debian

ENV MOUNT_PATH=/mnt/gcsfuse

ADD https://github.com/GoogleCloudPlatform/gcsfuse/releases/download/v0.23.0/gcsfuse_0.23.0_amd64.deb gcsfuse.deb
RUN apt-get update && \
  apt-get install --no-install-recommends -qy curl jq libfuse-dev fuse ca-certificates && \
  dpkg -i gcsfuse.deb && \
  mkdir -p /mnt/gcs && \
  rm -rf /var/lib/apt/lists/*

COPY backup.sh /usr/local/bin/

CMD ["backup.sh"]
